系统设计：patrace 的架构设计

算法：mesh 简化算法、shader 简化算法、联合简化算法

联合简化应用的好处：不同的 mesh 会使用同一个 shader，远处的 mesh 可以简化更多，可以通过 mesh 来替换不同的 shader 变体，得到更高的优化。原论文中对每种简化 mesh 和 lod 生成一组帕累托，改为提高 error 阈值，生成完帕累托之后再进行多次搜索，例如从最外层 帕累托搜索，再从次一层搜索

实验：一个 mesh 在 UE 中生成多级 LOD， 联合简化得到不同简化程度的 shader 变体，整个场景的绘制。







面向移动端的必要性：

这对于计算能力与带宽更为有限的移动端而言， 复杂着色器所带来的负担更为明显，不仅会使得帧率较低影响交互性，还会加剧设备发热、增加耗电量。  



面临的挑战：

首先，目前的游戏和虚拟现实应用大多使用第三方的游戏引擎来实现。由于与显卡通信的绘制指令流被封装在游戏引擎的底层部分， 而一般的使用游戏引擎的技术人员又不熟悉或不能接触到这些底层，所以要实现简化着色器的耗时和误差的精确测量并非易事。无法实现简化着色器的精确测量意味着最后无法筛选出最优的着色器变种，简化效果不稳定。

此外，由于对原图形程序的依赖，现有方法需要对不同的图形程序重复实现着色器耗时和误差的测量，要广泛地应用在不同的图形程序上就意味着大量的重复性工作。 再者，对于无法获取原图形程序代码的情况，现
有的方法也无法适用。所以，现有方法的实用性较低。

因此，一种能够对简化着色器的耗时和误差进行精确测量，同时不依赖于原图形程序的着色器自动简化方法，会具备较好的简化效果和较高的实用性。  





近年来，图形硬件上的发展不仅大幅提高了吞吐量与计算能力，而且提供了功能越来越强大的GPU管线可编程阶段。与此同时，许多图形应用为了满足日益增长的真实感绘制需求，趋向于使用复杂细节的网格模型以及基于物理的复杂材质。然而图形硬件能力的提高不足以支撑复杂网格模型的处理，特别是对游戏等实时渲染应用，其为了追求真实感，经常使用一些网格顶点的额外属性，例如颜色、法线和材质属性等，这使得几何模型更加复杂、开销更大。另一方面，图形管线的可编程阶段的着色器支持越来越多的特性，如动态流程控制等。借助于可编程阶段的灵活性，许多图形应用的绘制过程逐渐逼近基于物理的着色，这一趋势对于实时渲染应用更加显著。这对于计算能力与带宽更为有限的移动端而言，复杂网格模型与着色器所带来的负担更加明显，不仅会使得帧率较低影响交互性，还会加剧设备发热、增加耗电量。  

绘制场景的真实感依赖于网格模型的高细节与着色器的复杂计算，这些都会带来显著的渲染开销，导致渲染时间的延长。特别是对于游戏等交互式的实时应用，非常依赖于渲染性能，对于渲染开销的提升也非常敏感。而内容创作者为了得到高质量的绘制场景，往往偏向于尽可能多的模型细节。同时，技术美术工作者可通过游戏引擎提供的材质蓝图编辑器来定制化着色器，从而实现逼真的绘制效果，这会生成复杂繁重的着色器。因此在硬件能力提高的同时，还需要开发网格简化算法来避免三维几何模型的过多细节，以及着色器简化算法去除对于渲染结果无影响或较小影响的计算。

通常来说，场景中一个物体的外观是由着色器与其网格模型共同决定，因此一者的简化可能会带来另一者的更多简化空间。基于此，最近有工作提出将网格简化算法与着色器简化算法结合起来，对二者进行联合简化[1]。实验结果表明，相比于传统的网格简化算法与着色器简化算法，网格与着色器联合简化算法可以达到更优的性能与质量的平衡。

移动端游戏等实时渲染应用往往具有大量的着色器与网格，传统的简化不仅要求从业者具有丰富的经验，而且需要繁琐耗时的操作来验证简化结果的性能与质量。因此，设计一个高度自动化的简化系统可以大幅提高效率。而对于带宽与计算能力有限的移动端而言，网格与着色器联合简化算法可以给出性能与质量的更优平衡，具有很大的研究意义与应用价值。此外，简化算法的执行依赖于对简化变体的评估，这需要在原图形程序中实现对网格或着色器的性能与误差的测量，再将简化变体送回原图形程序重新执行。而对原图形程序的依赖会导致需要对不同的图形程序重复实现性能与误差的测量，要广泛地应用在不同的图形程序上就意味着大量的重复性工作。一种能够不依赖于原图形程序的性能与误差的测量方法，会具备较高的实用性。



